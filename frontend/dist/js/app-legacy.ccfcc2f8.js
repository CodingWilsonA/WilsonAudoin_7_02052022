(function(){"use strict";var e={6322:function(e,t,s){s(6992),s(8674),s(9601),s(7727);var r=s(144),a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("v-app",[r("v-main",[e.$store.state.userLoggedIn?e._e():r("img",{staticClass:"homeLogo",attrs:{alt:"Groupomania logo",src:s(7075)}}),e.$store.state.userLoggedIn?e._e():r("nav",[r("router-link",{attrs:{to:"/"}},[e._v("Se connecter")]),r("v-spacer"),r("router-link",{attrs:{to:"/inscription"}},[e._v("S'inscrire")])],1),r("router-view")],1)],1)],1)},o=[],n=s(1001),i=s(3453),u=s.n(i),l=s(7524),c=s(1009),p=s(3631),d={},m=(0,n.Z)(d,a,o,!1,null,"76186f22",null),g=m.exports;u()(m,{VApp:l.Z,VMain:c.Z,VSpacer:p.Z});var f=s(8345),v=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"loginFields"},[s("div",{staticClass:"loginFields--container"},[s("v-text-field",{attrs:{label:"Email",rules:[e.rules.required]},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),s("v-text-field",{attrs:{label:"Mot de passe",rules:[e.rules.required],"append-icon":e.show?"mdi-eye":"mdi-eye-off",type:e.show?"text":"password"},on:{"click:append":function(t){e.show=!e.show}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),""!==e.errorMessage?s("p",{staticClass:"loginFields--errorMessage"},[e._v(e._s(e.errorMessage))]):e._e(),s("button",{staticClass:"loginFields--button",on:{click:e.login}},[e._v("Se connecter")])])},h=[],b=s(6198),k=(s(5666),s(8862),s(9669)),_=s.n(k),x=function(){return _().create({baseURL:"http://localhost:8081"})},I={login:function(e){return x().post("api/auth/login",e)}},M={data:function(){return{rules:{required:function(e){return!!e||"Ce champs est requis."}},errorMessage:"",show:!1,email:"",password:""}},methods:{login:function(){var e=this;return(0,b.Z)(regeneratorRuntime.mark((function t(){var s,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(""===e.email||""===e.password){t.next=36;break}return t.prev=1,t.next=4,I.login({email:e.email,password:e.password});case 4:s=t.sent,r={token:s.data.token,userId:s.data.userId,userAuthLvl:s.data.userAuthLvl},localStorage.setItem("groupoUser",JSON.stringify(r)),e.$router.push({name:"main"}),t.next=34;break;case 10:if(t.prev=10,t.t0=t["catch"](1),"ERR_NETWORK"!==t.t0.code){t.next=18;break}return e.errorMessage="Le serveur de l'application est actuellement indisponible. Veuillez essayer ultérieurement.",console.error(t.t0.response),t.abrupt("return");case 18:if("Wrong credentials"!==t.t0.response.data.message){t.next=24;break}return e.errorMessage="Ces identifiants ne correspondent à aucun utilisateur enregistré.",console.error(t.t0.response.data.message),t.abrupt("return");case 24:if("Some field contains a forbidden value"!==t.t0.response.data.message){t.next=30;break}return e.errorMessage="Les caractères spéciaux suivants ne peuvent pas être utilisés : < > \" ' ` $",console.error(t.t0.response.data.message),t.abrupt("return");case 30:if("Too many requests, please try again later."!==t.t0.response.data){t.next=34;break}return e.errorMessage="Vous avez dépassé le nombre de tentatives de connexion autorisé. Veuillez essayer ultérieurement.",console.error(t.t0.response.data),t.abrupt("return");case 34:t.next=37;break;case 36:e.errorMessage="Veuillez entrer une adresse email et un mot de passe.";case 37:case"end":return t.stop()}}),t,null,[[1,10]])})))()}},beforeMount:function(){localStorage.getItem("groupoUser")&&this.$router.push({name:"main"})}},L=M,w=s(4942),P=(0,n.Z)(L,v,h,!1,null,"04fe08a3",null),y=P.exports;u()(P,{VTextField:w.Z});var C=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"signupFields"},[s("div",{staticClass:"signupFields--container"},[s("v-text-field",{attrs:{label:"Prénom",rules:[e.rules.required]},model:{value:e.firstName,callback:function(t){e.firstName=t},expression:"firstName"}}),s("v-text-field",{attrs:{label:"Nom",rules:[e.rules.required]},model:{value:e.lastName,callback:function(t){e.lastName=t},expression:"lastName"}}),s("v-text-field",{attrs:{type:"email",label:"Email",rules:[e.rules.required,e.rules.email]},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),""!==this.duplicateEmailMessage?s("p",{staticClass:"signupFields--container__emailError"},[e._v(e._s(e.duplicateEmailMessage))]):e._e(),s("v-text-field",{attrs:{label:"Mot de passe","append-icon":e.show?"mdi-eye":"mdi-eye-off",type:e.show?"text":"password",rules:[e.rules.required,e.rules.min],counter:""},on:{"click:append":function(t){e.show=!e.show}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),e.errorMessage?s("p",{staticClass:"signupFields--errorMessage"},[e._v(" "+e._s(e.errorMessage))]):e._e(),""===this.firstName||""===this.lastName||!0!==this.validEmail||this.password.length<8?s("button",{staticClass:"signupFields--button signupFields--button__invalid"},[e._v("S'inscrire")]):s("button",{staticClass:"signupFields--button signupFields--button__valid",on:{click:e.register}},[e._v("S'inscrire")])])},U=[],S=(s(4916),s(7601),s(6699),s(2023),{register:function(e){return x().post("api/auth/signup",e)}}),T={data:function(){var e=this;return{show:!1,validEmail:!1,duplicateEmailMessage:"",errorMessage:"",rules:{required:function(e){return!!e||"Ce champs est requis."},min:function(e){return e.length>=8||"Le mot de passe doit être de 8 caractères minimum"},email:function(t){var s=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return s.test(t)?(e.validEmail=!0,s.test(t)):(e.validEmail=!1,"Cette adresse email n'est pas valide.")}},firstName:"",lastName:"",email:"",password:""}},methods:{register:function(){var e=this;return(0,b.Z)(regeneratorRuntime.mark((function t(){var s,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.validEmail=!1,t.prev=1,t.next=4,S.register({firstName:e.firstName,lastName:e.lastName,email:e.email,password:e.password});case 4:s=t.sent,r={token:s.data.token,userId:s.data.userId,userAuthLvl:s.data.userAuthLvl},localStorage.setItem("groupoUser",JSON.stringify(r)),e.$router.push({name:"main"}),t.next=25;break;case 10:if(t.prev=10,t.t0=t["catch"](1),!t.t0.response.data||!t.t0.response.data.message.includes("Duplicate")){t.next=18;break}return e.duplicateEmailMessage="Un compte est déjà enregistré avec cette adresse email.",console.error(t.t0.response.data),t.abrupt("return");case 18:if("ERR_NETWORK"!==t.t0.code){t.next=24;break}return e.errorMessage="Le serveur de l'application est actuellement indisponible. Veuillez essayer ultérieurement.",console.error(t.t0.message),t.abrupt("return");case 24:"Some field contains a forbidden value"===t.t0.response.data.message&&(e.errorMessage="Les caractères spéciaux suivants ne peuvent pas être utilisés : < > \" ' ` $");case 25:case"end":return t.stop()}}),t,null,[[1,10]])})))()}}},N=T,Z=(0,n.Z)(N,C,U,!1,null,"016ec561",null),F=Z.exports;u()(Z,{VTextField:w.Z});var E=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"main"},[r("v-toolbar",{attrs:{id:"toolbar"}},[r("img",{staticClass:"main--toolbar--groupomaniaLogo",attrs:{src:s(3289),alt:"Logo de Groupomania"}}),r("h1",[e._v(" Groupomania ")]),r("v-spacer"),r("v-toolbar-items",[r("button",{on:{click:e.logout}},[e._v(" Déconnexion ")])])],1),r("create-post",{on:{"update-posts-list":e.getAllPosts}}),r("ul",{staticClass:"main--postList"},e._l(e.postsArray,(function(t){return r("list-posts",{key:t.post_id,attrs:{content:t.content,imgUrl:t.img_url,likes:t.likes,creationDate:t.created_at,updateDate:t.updated_at,authorId:t.author_id,postId:t.post_id,authorFirstName:t.first_name,authorLastName:t.last_name},on:{"update-posts-list":e.getAllPosts}})})),1),this.isSessionInvalid?r("div",{staticClass:"main--invalidSession"},[r("p",[e._v(e._s(e.errorMessage))])]):e._e()],1)},$=[],A=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"createPost"},[s("h2",[e._v("Créez votre post ici")]),s("v-textarea",{attrs:{"auto-grow":"",rows:"1",label:"Exprimez-vous"},model:{value:e.postText,callback:function(t){e.postText=t},expression:"postText"}}),s("div",{staticClass:"createPost--buttonsContainer"},[e.imageUrl?s("img",{staticClass:"createPost--buttonsContainer--postImage",attrs:{src:this.imageUrl}}):e._e(),s("add-image",{on:{"send-img-url":e.setImageUrl}}),""===this.postText?s("button",{staticClass:"createPost--buttonsContainer--button createPost--buttonsContainer__invalidButton"},[e._v("Envoyer")]):s("button",{staticClass:"createPost--buttonsContainer--button createPost--buttonsContainer__validButton",on:{click:e.createPost}},[e._v("Envoyer")])],1),this.errorMessage&&!this.postText?s("p",[e._v(e._s(e.errorMessage))]):e._e()],1)},D=[],R=_().create({baseURL:"http://localhost:8081"});R.interceptors.request.use((function(e){var t=JSON.parse(localStorage.getItem("groupoUser")),s=t.token;return e.headers.Authorization="Bearer ".concat(s),e}));var V=R,O={getAllPosts:function(){return V.get("api/posts")},getUsersWhoLiked:function(){return V.get("api/posts/usersLiked")},createPost:function(e){return V.post("api/posts",e)},updatePost:function(e){return V.put("api/posts",e)},updateLikes:function(e){return V.put("api/posts/likes",e)},postUserIdLike:function(e){return V.post("api/posts/usersLiked",e)},uploadImage:function(e){return V.post("api/posts/images",e)},deletePost:function(e){return V["delete"]("api/posts",{data:{params:e}})}},z=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("form",{staticClass:"createPost--buttonsContainer",attrs:{enctype:"multipart/form-data"}},[""!==e.errorMessage?s("p",{staticClass:"createPost--buttonsContainer--errorMessage"},[e._v(e._s(e.errorMessage))]):e._e(),s("label",{staticClass:"createPost--buttonsContainer--button",attrs:{for:"getImage"}},[e._v("Ajoutez une image")]),s("input",{ref:"imageFile",attrs:{type:"file",name:"getImage",id:"getImage"},on:{change:e.selectImage}})])},j=[],q={data:function(){return{imageFile:"",imageUrl:"",errorMessage:""}},methods:{selectImage:function(){this.imageFile=this.$refs.imageFile.files[0],this.sendImageFile(this.imageFile),this.$refs.imageFile.value=""},sendImageFile:function(e){var t=this;return(0,b.Z)(regeneratorRuntime.mark((function s(){var r,a;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return r=new FormData,r.append("imageFile",e),s.prev=2,s.next=5,O.uploadImage(r);case 5:a=s.sent,t.imageUrl=a.data.filePath,t.sendImageUrlToParent(),t.errorMessage="",s.next=14;break;case 11:s.prev=11,s.t0=s["catch"](2),s.t0.response.data&&"INVALID_FILE_TYPE"===s.t0.response.data.message?(t.errorMessage="Vous pouvez seulement ajouter des fichiers de type image (jpg, jpeg, png ou gif).",console.error(s.t0.response.data.message)):s.t0.response.data&&"INVALID_FILE_SIZE"===s.t0.response.data.message?(t.errorMessage="Cette image est trop volumineuse (max: 500Ko).",console.error(s.t0.response.data.message)):(t.errorMessage="Oops ! Nous n'avons pas pu ajouter votre image. Veuillez essayer ultérieurement.",console.error(s.t0.code));case 14:case"end":return s.stop()}}),s,null,[[2,11]])})))()},sendImageUrlToParent:function(){this.$emit("send-img-url",{imgUrl:this.imageUrl})}}},W=q,B=(0,n.Z)(W,z,j,!1,null,"3b692b57",null),K=B.exports,J={components:{AddImage:K},data:function(){return{postText:"",imageUrl:"",errorMessage:""}},methods:{createPost:function(){var e=this;return(0,b.Z)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,O.createPost({content:e.postText,imageUrl:e.imageUrl,authorId:e.$store.state.userId});case 3:e.postText="",e.imageUrl="",e.errorMessage="",e.updatePostsList(),t.next=14;break;case 9:t.prev=9,t.t0=t["catch"](0),e.errorMessage="Oups ! Votre post n'a pas pu être créé. Veuillez réessayer ultérieurement.",e.postText="",console.error(t.t0.response.data);case 14:case"end":return t.stop()}}),t,null,[[0,9]])})))()},updatePostsList:function(){this.$emit("update-posts-list")},setImageUrl:function(e){this.imageUrl=e.imgUrl}}},G=J,H=s(4350),Y=(0,n.Z)(G,A,D,!1,null,"32bcacb6",null),Q=Y.exports;u()(Y,{VTextarea:H.Z});var X=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("li",{staticClass:"post"},[s("p",[e._v(" "+e._s(e.content)+" ")]),e.imgUrl?s("img",{attrs:{src:e.imgUrl,alt:"Image postée par un utilisateur.",loading:"lazy"}}):e._e(),s("add-like",{attrs:{postLikes:this.likes,likedPostId:this.postId,userIdLiked:this.$store.state.userId},on:{"update-posts-list":e.updatePostsList}}),s("p",{staticClass:"post--creationDate"},[e._v("Créé le : "+e._s(this.formatDate(e.creationDate))+" par "+e._s(e.authorFirstName)+" "+e._s(e.authorLastName))]),null!==e.updateDate?s("p",{staticClass:"post--updateDate"},[e._v("Modifié le : "+e._s(this.formatDate(e.updateDate)))]):e._e(),e.authorId===this.$store.state.userId||1===this.$store.state.userAuthLvl?s("div",[s("modify-post",{attrs:{postToModify:this.postId,placeHolder:this.content},on:{"update-posts-list":e.updatePostsList}}),s("delete-post",{attrs:{postToDelete:this.postId},on:{"update-posts-list":e.updatePostsList}})],1):e._e()],1)},ee=[],te=(s(9653),s(3123),s(2222),function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("button",{on:{click:e.togglePostModification}},[e._v("Modifier ce post")]),e.displayPostModification?s("div",{staticClass:"postModification"},[s("v-textarea",{attrs:{"auto-grow":"",rows:"1",label:"Modifiez le texte de votre post ici"},model:{value:e.postModificationText,callback:function(t){e.postModificationText=t},expression:"postModificationText"}}),e.errorMessage?s("p",{staticClass:"postModification--errorMessage"},[e._v(e._s(e.errorMessage))]):e._e(),s("div",{staticClass:"postModification--buttons"},[s("button",{on:{click:e.updatePost}},[e._v("Mettre à jour")]),s("label",{staticClass:"postModification--buttons--modifyImageButton",attrs:{for:"modifyImage"}},[e._v("Modifier l'image")]),s("input",{ref:"modifyImageFile",attrs:{type:"file",name:"getImage",id:"modifyImage"},on:{change:e.selectImage}}),s("button",{on:{click:e.togglePostModification}},[e._v("Annuler")])]),e.postModificationImageUrl?s("p",{staticClass:"postModification--successMessage"},[e._v("Votre nouvelle image a bien été ajoutée.")]):e._e()],1):e._e()])}),se=[],re={data:function(){return{imageFile:"",postModificationText:this.placeHolder,postModificationImageUrl:"",displayPostModification:!1,errorMessage:""}},methods:{togglePostModification:function(){this.displayPostModification?this.displayPostModification=!1:this.displayPostModification=!0},updatePost:function(){var e=this;return(0,b.Z)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(""===e.postModificationText&&""===e.postModificationImageUrl){t.next=16;break}return t.prev=1,t.next=4,O.updatePost({modifiedContent:e.postModificationText,modifiedImage:e.postModificationImageUrl,postId:e.postToModify});case 4:e.imageFile="",e.postModificationImageUrl="",e.togglePostModification(),e.updatePostsList(),t.next=14;break;case 10:t.prev=10,t.t0=t["catch"](1),e.errorMessage="Oops ! Nous n'avons pas pu mettre à jour votre post. Veuillez essayer ultérieurement.",console.error(t.t0);case 14:t.next=17;break;case 16:e.errorMessage="Veuillez modifier le texte du post, son image ou les deux.";case 17:case"end":return t.stop()}}),t,null,[[1,10]])})))()},selectImage:function(){this.imageFile=this.$refs.modifyImageFile.files[0],this.sendImageFile(this.imageFile),this.$refs.modifyImageFile.value=""},sendImageFile:function(e){var t=this;return(0,b.Z)(regeneratorRuntime.mark((function s(){var r,a;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return r=new FormData,r.append("imageFile",e),s.prev=2,s.next=5,O.uploadImage(r);case 5:a=s.sent,t.postModificationImageUrl=a.data.filePath,t.errorMessage="",s.next=13;break;case 10:s.prev=10,s.t0=s["catch"](2),s.t0.response.data&&"INVALID_FILE_TYPE"===s.t0.response.data.message?(t.errorMessage="Vous pouvez seulement ajouter des fichiers de type image (jpg, jpeg, png ou gif).",console.error(s.t0.response.data.message)):s.t0.response.data&&"INVALID_FILE_SIZE"===s.t0.response.data.message?(t.errorMessage="Cette image est trop volumineuse (max: 500Ko).",console.error(s.t0.response.data.message)):(t.errorMessage="Oops ! Nous n'avons pas pu ajouter votre image. Veuillez essayer ultérieurement.",console.error(s.t0.code));case 13:case"end":return s.stop()}}),s,null,[[2,10]])})))()},updatePostsList:function(){this.$emit("update-posts-list")}},props:{postToModify:Number,placeHolder:String}},ae=re,oe=(0,n.Z)(ae,te,se,!1,null,"77176d76",null),ne=oe.exports;u()(oe,{VTextarea:H.Z});var ie=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"post--buttons"},[s("button",{on:{click:e.togglePostDeletion}},[e._v("Supprimer ce post")]),!1!==e.displayConfirmDeletion?s("div",{staticClass:"post--buttons--confirmDeletion"},[s("p",[e._v("Êtes-vous sûr de vouloir supprimer ce post ?")]),e.errorMessage?s("p",{staticClass:"post--buttons--errorMessage"},[e._v(e._s(e.errorMessage))]):e._e(),s("button",{on:{click:e.deletePost}},[e._v("Oui")]),s("button",{on:{click:e.togglePostDeletion}},[e._v("Non")])]):e._e()])},ue=[],le={data:function(){return{displayConfirmDeletion:!1,errorMessage:""}},props:{postToDelete:Number},methods:{deletePost:function(){var e=this;return(0,b.Z)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,O.deletePost({postIdToDelete:e.postToDelete});case 3:e.updatePostsList(),t.next=10;break;case 6:t.prev=6,t.t0=t["catch"](0),e.errorMessage="Oops ! Nous n'avons pas pu supprimer votre post. Veuillez essayer ultérieurement.",console.error(t.t0.code);case 10:case"end":return t.stop()}}),t,null,[[0,6]])})))()},updatePostsList:function(){this.$emit("update-posts-list")},togglePostDeletion:function(){this.displayConfirmDeletion?this.displayConfirmDeletion=!1:this.displayConfirmDeletion=!0}}},ce=le,pe=(0,n.Z)(ce,ie,ue,!1,null,"627e9faa",null),de=pe.exports,me=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"likes"},[!1===e.canUserLike?s("svg",{staticClass:"likes--heartIcon likes--heartIcon__invalid",attrs:{version:"1.1",viewBox:"0 0 512 512"}},[s("path",{attrs:{d:"M462.3 62.6C407.5 15.9 326 24.3 275.7 76.2L256 96.5l-19.7-20.3C186.1 24.3 104.5 15.9 49.7 62.6c-62.8 53.6-66.1 149.8-9.9 207.9l193.5 199.8c12.5 12.9 32.8 12.9 45.3 0l193.5-199.8c56.3-58.1 53-154.3-9.8-207.9z"}})]):s("svg",{staticClass:"likes--heartIcon",attrs:{version:"1.1",viewBox:"-8 -8 512 512"},on:{click:e.updateLikes}},[s("path",{attrs:{d:"M462.3 62.6C407.5 15.9 326 24.3 275.7 76.2L256 96.5l-19.7-20.3C186.1 24.3 104.5 15.9 49.7 62.6c-62.8 53.6-66.1 149.8-9.9 207.9l193.5 199.8c12.5 12.9 32.8 12.9 45.3 0l193.5-199.8c56.3-58.1 53-154.3-9.8-207.9z"}})]),s("p",[e._v(" "+e._s(e.postLikes)+" ")])]),e.errorMessage?s("p",{staticClass:"likes--errorMessage"},[e._v(" "+e._s(e.errorMessage))]):e._e()])},ge=[],fe=(s(1539),s(4747),{data:function(){return{usersLikesArray:[],canUserLike:!0,errorMessage:""}},props:{postLikes:Number,likedPostId:Number,userIdLiked:Number},methods:{updateLikes:function(){var e=this;return(0,b.Z)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,O.updateLikes({postId:e.likedPostId});case 3:e.postUserIdLike(),e.updatePostsList(),t.next=12;break;case 7:return t.prev=7,t.t0=t["catch"](0),e.errorMessage="Oops ! Nous n'avons pas pu ajouter votre like. Veuillez essayer ultérieurement.",console.error(t.t0.message),t.abrupt("return");case 12:case"end":return t.stop()}}),t,null,[[0,7]])})))()},postUserIdLike:function(){var e=this;return(0,b.Z)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,O.postUserIdLike({userId:e.userIdLiked,postId:e.likedPostId});case 3:e.getUsersWhoLiked(),t.next=10;break;case 6:return t.prev=6,t.t0=t["catch"](0),console.error(t.t0.message),t.abrupt("return");case 10:case"end":return t.stop()}}),t,null,[[0,6]])})))()},getUsersWhoLiked:function(){var e=this;return(0,b.Z)(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,O.getUsersWhoLiked();case 3:s=t.sent,e.usersLikesArray=s.data,e.isPostAlreadyLiked(),t.next=12;break;case 8:return t.prev=8,t.t0=t["catch"](0),console.error(t.t0.message),t.abrupt("return");case 12:case"end":return t.stop()}}),t,null,[[0,8]])})))()},updatePostsList:function(){this.$emit("update-posts-list")},isPostAlreadyLiked:function(){var e=this;this.usersLikesArray.forEach((function(t){t.user_id===e.userIdLiked&&t.post_id===e.likedPostId&&(e.canUserLike=!1)}))}},beforeMount:function(){this.getUsersWhoLiked()}}),ve=fe,he=(0,n.Z)(ve,me,ge,!1,null,"40b35e52",null),be=he.exports,ke={components:{ModifyPost:ne,DeletePost:de,AddLike:be},props:{content:String,imgUrl:String,likes:Number,creationDate:String,updateDate:String,authorId:Number,postId:Number,authorFirstName:String,authorLastName:String},methods:{formatDate:function(e){var t=e.split(/[-:T.]/),s="".concat(t[2],"/").concat(t[1],"/").concat(t[0]," à ").concat(t[3],":").concat(t[4]);return s},updatePostsList:function(){this.$emit("update-posts-list")}}},_e=ke,xe=(0,n.Z)(_e,X,ee,!1,null,"edea8ad6",null),Ie=xe.exports,Me={data:function(){return{postsArray:[],isSessionInvalid:!1,errorMessage:""}},components:{CreatePost:Q,ListPosts:Ie},methods:{logout:function(){localStorage.removeItem("groupoUser"),this.$store.dispatch("storeToken",null),this.$store.dispatch("storeUserId",null),this.$store.dispatch("storeUserAuthLvl",null),this.$router.push({name:"login"})},getAllPosts:function(){var e=this;return(0,b.Z)(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,O.getAllPosts();case 3:s=t.sent,e.postsArray=s.data,t.next=21;break;case 7:if(t.prev=7,t.t0=t["catch"](0),!t.t0.response.data||"Unauthenticated request !"!==t.t0.response.data.message){t.next=16;break}return e.isSessionInvalid=!0,e.errorMessage="Votre session a expiré. Vous allez être redirigés vers la page de connexion dans quelques secondes.",console.error(t.t0.response.data.message),t.abrupt("return");case 16:if("ERR_NETWORK"!==t.t0.code){t.next=21;break}return e.isSessionInvalid=!0,e.errorMessage="Le serveur de l'application est actuellement indisponible. Vous allez être redirigés vers la page de connexion dans quelques secondes.",console.error(t.t0.code),t.abrupt("return");case 21:case"end":return t.stop()}}),t,null,[[0,7]])})))()}},beforeMount:function(){if(localStorage.getItem("groupoUser")){var e=JSON.parse(localStorage.getItem("groupoUser"));this.$store.dispatch("storeToken",e.token),this.$store.dispatch("storeUserId",e.userId),this.$store.dispatch("storeUserAuthLvl",e.userAuthLvl),this.getAllPosts()}else this.logout()},updated:function(){this.isSessionInvalid&&setTimeout(function(){this.logout()}.bind(this),6e3)}},Le=Me,we=s(9366),Pe=s(7921),ye=(0,n.Z)(Le,E,$,!1,null,"2160495f",null),Ce=ye.exports;u()(ye,{VSpacer:p.Z,VToolbar:we.Z,VToolbarItems:Pe.lj}),r.Z.use(f.Z);var Ue=[{path:"/",name:"login",component:y},{path:"/inscription",name:"signup",component:F},{path:"/accueil",name:"main",component:Ce}],Se=new f.Z({routes:Ue}),Te=Se,Ne=s(858);r.Z.use(Ne.Z);var Ze=new Ne.Z({theme:{dark:!0}}),Fe=s(3678),Ee=s(629);r.Z.use(Ee.ZP);var $e=new Ee.ZP.Store({strict:!1,state:{token:"",userId:null,userAuthLvl:null,userLoggedIn:!1},mutations:{setStateToken:function(e,t){e.token=t,e.userLoggedIn=!!t},setStateUserId:function(e,t){e.userId=t},setStateUserAuthLvl:function(e,t){e.userAuthLvl=t}},actions:{storeToken:function(e,t){var s=e.commit;s("setStateToken",t)},storeUserId:function(e,t){var s=e.commit;s("setStateUserId",t)},storeUserAuthLvl:function(e,t){var s=e.commit;s("setStateUserAuthLvl",t)}}});r.Z.config.productionTip=!1,(0,Fe.Z)($e,Te),new r.Z({router:Te,vuetify:Ze,store:$e,render:function(e){return e(g)}}).$mount("#app")},3289:function(e,t,s){e.exports=s.p+"img/groupomania-icon.5ed9d67f.png"},7075:function(e,t,s){e.exports=s.p+"img/groupomania-logo.4861e929.png"}},t={};function s(r){var a=t[r];if(void 0!==a)return a.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,s),o.exports}s.m=e,function(){var e=[];s.O=function(t,r,a,o){if(!r){var n=1/0;for(c=0;c<e.length;c++){r=e[c][0],a=e[c][1],o=e[c][2];for(var i=!0,u=0;u<r.length;u++)(!1&o||n>=o)&&Object.keys(s.O).every((function(e){return s.O[e](r[u])}))?r.splice(u--,1):(i=!1,o<n&&(n=o));if(i){e.splice(c--,1);var l=a();void 0!==l&&(t=l)}}return t}o=o||0;for(var c=e.length;c>0&&e[c-1][2]>o;c--)e[c]=e[c-1];e[c]=[r,a,o]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var r in t)s.o(t,r)&&!s.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){s.p="../dist/"}(),function(){var e={143:0};s.O.j=function(t){return 0===e[t]};var t=function(t,r){var a,o,n=r[0],i=r[1],u=r[2],l=0;if(n.some((function(t){return 0!==e[t]}))){for(a in i)s.o(i,a)&&(s.m[a]=i[a]);if(u)var c=u(s)}for(t&&t(r);l<n.length;l++)o=n[l],s.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return s.O(c)},r=self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=s.O(void 0,[998],(function(){return s(6322)}));r=s.O(r)})();
//# sourceMappingURL=app-legacy.ccfcc2f8.js.map